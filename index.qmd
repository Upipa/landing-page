---
format:
  html: 
    include-in-header: 
      - text: |
          <style>
            body {
              padding-top: 0 !important;
            }
          </style>
---

![](/images/main-slider-1.jpg){.column-screen}

:::: {.column-screen-inset}

```{r}
#| label: setup
#| include: false

library(tidyverse)
library(DBI)
library(odbc)
library(shiny)
library(bslib)
library(bsicons)
```

```{r}

con <- dbConnect(
  odbc(),
  driver = 'ODBC Driver 18 for SQL Server',
  server = "upipa-acs.database.windows.net",
  database = "IndicareSaluteLab",
  uid = Sys.getenv("UID"),
  pwd = Sys.getenv("PWD")
)
```

```{r}

layout_columns(
  value_box(
    "Obiettivo",
    "Misurare per migliorare",
    showcase = icon("flag-checkered")
  ),
  value_box(
    "Strumento",
    "Sistema di indicatori per il Long Term Care",
    showcase = bs_icon("tools")
  ),
  value_box(
    "Partecipanti",
    "Per tutte le strutture Long Term Care",
    showcase = bs_icon("building")
  )
)
```

```{r}

n_enti <- tbl(con, "indicare_salute") |>
  filter(anno == year(today())) |>
  summarise(enti = n_distinct(ente)) |>
  pull(enti)

n_aree <- tbl(con, "indicare_salute") |>
  filter(anno == year(today())) |>
  collect() |>
  mutate(area = str_extract(indicatore, "\\d")) |>
  summarise(aree = n_distinct(area))

n_indicatori <- tbl(con, "indicare_salute") |>
  filter(anno == year(today())) |>
  summarise(indicatori = n_distinct(indicatore)) |>
  pull(indicatori)

layout_columns(
  value_box(
    "Enti",
    n_enti,
    showcase = bs_icon("people"),
    theme = "primary"
  ),
  value_box(
    "Aree",
    n_aree,
    showcase = bs_icon("diagram-2"),
    theme = "primary"
  ),
  value_box(
    "Indicatori",
    n_indicatori,
    showcase = icon("graph-up"),
    theme = "primary"
  )
)

```

::: text-center
Da esperienze di eccellenza per un unico progetto:
:::

## **indiCARE salute** {.text-center}

[![U.P.I.P.A. Unione Provinciale Istituzioni per l'Assistenza](images/paste-2.png)](https://www.upipa.tn.it/Chi-siamo/Chi-siamo/Storia)


::::